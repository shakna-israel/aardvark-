build() {
  compile
  flash
}

compile() {
  model=$(getmodel "$1")
  if [ -z "$model" ]; then
    echo "Could not find model: $2" >&2
    echo 'Confirm it can be found in `aardvark list`' >&2
    exit 1
  fi

  avrgcc=$(getgcc)
  if [ -z "$avrgcc" ]; then
    echo 'Could not find avr-gcc.' >&2
    echo 'Is it installed?' >&2
    exit 1
  fi

  objcopy=$(getobjcopy)
  if [ -z "$objcopy" ]; then
    echo 'Could not find avr-objcopy.' >&2
    echo 'Is it installed?' >&2
    exit 1
  fi

  if [ -f "$2" ]; then
    data=$(cat "$2")
    if [ -z "$data" ]; then
      echo "Read no data from file: $2" >&2
      echo 'File needs at least some data.' >&2
      exit 1
    fi
  else
    echo "Could not access project file: $2" >&2
    echo 'Do you have permission?' >&2
    echo 'Does it exist?' >&2
    exit 1
  fi

  #todo: gcc command
}

flash() {
  ad=$(getdude)
  if [ -z "$ad" ]; then
    echo 'Could not find avrdude.' >&2
    echo 'Is it installed?' >&2
    exit 1
  fi
}
